import{_ as te}from"./EmptyState.vue.2686ac38.js";import{_ as se}from"./BaseModal.c2106c97.js";import{r as d,u as y,n as oe,q as le,G as ie,o as n,c as u,a as e,x as s,t as a,F as U,z as T,A as D,D as E,b as H,w as I,H as ne,d as C,s as W,B as ae,C as L}from"./entry.0551859d.js";import{w as b}from"./workflow.8067b181.js";import"./axios.config.3b7d29d9.js";const de=()=>{const l=d(!1),c=d({title:"",description:""});return{updateStep:async r=>{l.value=!0;try{typeof await b.updateWorkflowStep(r,c.value)<"u"&&y().$toast.success("Fields were added successfully!",{autoClose:5e3,dangerouslyHTMLString:!0})}catch(g){y().$toast.error(g.message,{autoClose:5e3,dangerouslyHTMLString:!0})}finally{l.value=!1}},loading:l,prefillUploadForm:r=>{c.value.title=r.title,c.value.description=r.description}}},re=()=>{const l=oe().params.id,c=d({}),i=d([]),p=d(!1);return{getWorkflowById:async()=>{p.value=!0;try{const g=await b.getWorkflowsById(l);c.value=g.data.workflow,i.value=g.data.workflow.steps.sort((h,w)=>h.index-w.index)}catch(g){y().$toast.success(g.message,{autoClose:5e3,dangerouslyHTMLString:!0})}finally{p.value=!1}},workflowObject:c,loading:p,workflowSteps:i}},ce=()=>{const l=d(!1);return{handleStatusUpdate:async(i,p)=>{try{l.value=!0,typeof await b.updateWorkflowStatus(i,p)<"u"&&y().$toast.success("Workflow status was updated successfully",{autoClose:5e3,dangerouslyHTMLString:!0})}catch(r){return y().$toast.error(r.message,{autoClose:5e3,dangerouslyHTMLString:!0}),r}finally{l.value=!1}},loading:l}},ue=()=>{const l=d(!1),c=d([]);return{fetchWorkflowFields:async()=>{l.value=!0;try{const p=await b.getWorkflowsFields();c.value=p.data.fields}catch(p){y().$toast.error(p.message,{autoClose:5e3,dangerouslyHTMLString:!0})}finally{l.value=!1}},workflowFields:c,loading:l}},pe=()=>{const l=d(!1),c=d({fields:[]});return{updateWorkflowSteps:async r=>{l.value=!0;try{await b.updateWorkflowSteps(r,{fieldIds:c.value}),y().$toast.success("Fields were added successfully!",{autoClose:5e3,dangerouslyHTMLString:!0})}catch(g){y().$toast.error(g.message,{autoClose:5e3,dangerouslyHTMLString:!0})}finally{l.value=!1}},loading:l,prefillPayload:r=>{c.value=r}}},fe=e("div",{class:"sm:flex-auto"},[e("h1",{class:"text-base font-semibold leading-6 text-gray-900"},"Workflows Details"),e("p",{class:"mt-2 text-sm text-gray-700"},"A brief information lto show workflow details")],-1),ge={key:0,class:"flow-root rounded-lg border border-gray-100 py-3 shadow-sm"},me={class:"-my-3 divide-y divide-gray-100 text-sm"},ye={class:"grid grid-cols-1 gap-1 p-3 even:bg-gray-50 sm:grid-cols-3 sm:gap-4"},_e=e("dt",{class:"font-medium text-gray-900"},"Name",-1),he={class:"text-gray-700 sm:col-span-2"},ve={class:"grid grid-cols-1 gap-1 p-3 even:bg-gray-50 sm:grid-cols-3 sm:gap-4"},xe=e("dt",{class:"font-medium text-gray-900"},"Description",-1),be={class:"text-gray-700 sm:col-span-2"},we={class:"grid grid-cols-1 gap-1 p-3 even:bg-gray-50 sm:grid-cols-3 sm:gap-4"},ke=e("dt",{class:"font-medium text-gray-900"},"Status",-1),Se={class:"text-gray-700 sm:col-span-2"},Ce={class:"flex justify-between items-center"},Ae={class:"grid grid-cols-1 gap-1 p-3 even:bg-gray-50 sm:grid-cols-3 sm:gap-4"},Fe=e("dt",{class:"font-medium text-gray-900"},"Steps",-1),Ne={key:0,class:"text-gray-700 sm:col-span-2"},Ue={class:"border-b border-gray-200 bg-white px-4 py-5 sm:px-6"},Te={class:"ml-4 mt-4"},We={class:"text-base font-semibold leading-6 text-gray-900"},je=e("span",{class:"text-sm font-medium text-gray-500"},"Title:",-1),Me={class:"mt-1 text-sm text-gray-900"},$e=e("span",{class:"text-sm font-medium text-gray-500"},"Description:",-1),Be={class:"mt-1 text-sm text-gray-900"},De=e("span",{class:"text-sm font-medium text-gray-500"},"Created At:",-1),Ee={class:"mt-1 text-sm text-gray-900"},He=e("span",{class:"text-sm font-medium text-gray-500"},"Fields Count:",-1),Ie={class:"ml-4 mt-4 flex-shrink-0 flex gap-x-3 items-center"},Le=["onClick"],Ve=["onClick"],Oe={key:1,class:"text-gray-700 sm:col-span-2"},Pe={class:"grid grid-cols-1 gap-1 p-3 even:bg-gray-50 sm:grid-cols-3 sm:gap-4"},Ge=e("dt",{class:"font-medium text-gray-900"},"Created At",-1),Re={class:"text-gray-700 sm:col-span-2"},ze={key:1,class:"bg-white rounded-lg shadow-md p-4 animate-pulse"},qe=e("div",{class:"w-full h-32 bg-gray-300 rounded mb-2"},null,-1),Je=[qe],Ke={key:3,class:"relative z-50","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true"},Qe=e("div",{class:"fixed inset-0"},null,-1),Xe={class:"fixed inset-0 overflow-hidden"},Ye={class:"absolute inset-0 overflow-hidden"},Ze={class:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16"},et={class:"pointer-events-auto w-screen max-w-md"},tt={class:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl"},st={class:"h-0 flex-1 overflow-y-auto"},ot={class:"bg-indigo-700 px-4 py-6 sm:px-6"},lt={class:"flex items-center justify-between"},it={class:"text-base font-semibold leading-6 text-white",id:"slide-over-title"},nt={class:"ml-3 flex h-7 items-center"},at=e("span",{class:"absolute -inset-2.5"},null,-1),dt=e("span",{class:"sr-only"},"Close panel",-1),rt=e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),ct=[at,dt,rt],ut={class:"mt-1"},pt={class:"text-sm text-indigo-300"},ft={key:0,class:"flex flex-1 flex-col justify-between p-6"},gt=e("legend",{class:"sr-only"},"Notifications",-1),mt={class:"space-y-5"},yt={class:"flex h-6 items-center"},_t=["onChange","id","value","name"],ht={class:"ml-3 text-sm leading-6"},vt=["for"],xt={id:"comments-description",class:"text-gray-500"},bt={id:"comments-description",class:"text-gray-500"},wt={key:1,class:"bg-white rounded-lg shadow-md p-4 animate-pulse"},kt=e("div",{class:"w-full h-32 bg-gray-300 rounded mb-2"},null,-1),St=[kt],Ct={class:"flex flex-shrink-0 justify-end px-4 py-4"},At=e("button",{type:"button",class:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},"Cancel",-1),Ft=["disabled"],Nt={class:"space-y-8"},Ut=e("h1",{class:"font-semibold text-gray-800 text-center text-lg"},"Update Workflow Status",-1),Tt=e("label",{for:"location",class:"block text-sm font-medium leading-6 text-gray-900"},"Status:",-1),Wt=["value"],jt=["disabled"],Mt={class:"flex h-full flex-col"},$t={class:"h-0 flex-1 overflow-y-auto"},Bt=e("div",{class:"p-4"},[e("h2",{class:"text-lg text-gray-900 font-semibold leading-6",id:"slide-over-title"}," Update Workflow Step "),e("p",{class:"text-sm text-gray-600"},"Get started by filling in the information below to update workflow step.")],-1),Dt={class:"flex flex-1 flex-col justify-between"},Et={class:"divide-y divide-gray-200 px-4 sm:px-6"},Ht={class:"space-y-6 pb-5 pt-6"},It=e("label",{for:"project-name",class:"block text-sm font-medium leading-6 text-gray-900"},"Name",-1),Lt={class:"mt-2"},Vt=e("label",{for:"description",class:"block text-sm font-medium leading-6 text-gray-900"},"Description",-1),Ot={class:"mt-2"},Pt={class:"flex flex-shrink-0 justify-end px-4 py-4"},Gt=["disabled"],Qt=le({__name:"[id]",setup(l){const{getWorkflowById:c,workflowObject:i,workflowSteps:p,loading:r}=re(),{fetchWorkflowFields:g,workflowFields:h,loading:w}=ue(),{updateWorkflowSteps:V,loading:j,prefillPayload:O}=pe(),{handleStatusUpdate:P,loading:M}=ce(),{updateStep:G,loading:$,prefillUploadForm:R}=de(),k=d(!1),v=d(!1);g();const A=d(!1),f=d({}),x=d([]),z=m=>{f.value=m,A.value=!0},q=(m,o)=>{if(o){if(x.value.includes(m))return;x.value.push(m)}else{const _=x.value.indexOf(m);_>-1&&x.value.splice(_,1)}},J=()=>{O(x.value),V(f.value.id)},K=()=>{ne().push(`/dashboard/document/workflow/${i.value.id}`)},Q=d([{text:"None",value:"STATUS_NONE"},{text:"Active",value:"STATUS_ACTIVE"},{text:"Maintenance",value:"STATUS_MAINTENANCE"},{text:"Archived",value:"STATUS_ARCHIVED"}]),S=d({status:""}),X=ie(()=>!!S.value.status),Y=async()=>{await P(i.value.id,S.value),k.value=!1},Z=m=>{f.value=m,v.value=!0},ee=async()=>{const m={title:f.value.title,description:f.value.description};R(m),await G(f.value.id),v.value=!1};return c(),(m,o)=>{const _=te,B=se;return n(),u("main",null,[e("button",{onClick:o[0]||(o[0]=t=>m.$router.back()),class:"text-white bg-black rounded-full text-sm mb-4 px-4 py-2"},"Go Back"),e("div",{class:"sm:flex sm:items-center border-[0.6px] rounded-tr-md rounded-tl-md p-3"},[fe,e("button",{onClick:K,type:"button",class:"relative inline-flex items-center rounded-md bg-black px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"},"View workflow documents")]),!s(r)&&Object.keys(s(i)).length?(n(),u("div",ge,[e("dl",me,[e("div",ye,[_e,e("dd",he,a(s(i).name||"N/A"),1)]),e("div",ve,[xe,e("dd",be,a(s(i).description||"N/A"),1)]),e("div",we,[ke,e("dd",Se,[e("div",Ce,[e("p",null,a(s(i).status||"N/A"),1),e("button",{onClick:o[1]||(o[1]=t=>k.value=!0),class:"block rounded-md bg-green-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"}," Update status")])])]),e("div",Ae,[Fe,s(i).steps.length?(n(),u("dd",Ne,[e("div",Ue,[(n(!0),u(U,null,T(s(p),(t,F)=>(n(),u("div",{key:F,class:"-ml-4 -mt-4 flex flex-wrap border-gray-400 border-b-[0.6px] last:border-b-0 py-2 items-center justify-between sm:flex-nowrap"},[e("div",Te,[e("h3",We,[je,C(" "+a(t.title),1)]),e("p",Me,[$e,C(" "+a(t.description),1)]),e("p",Be,[De,C(" "+a(t.createdAt),1)]),e("p",Ee,[He,C(" "+a(t.fieldsCount),1)])]),e("div",Ie,[e("button",{onClick:N=>Z(t),type:"button",class:"relative inline-flex items-center rounded-md bg-black px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"},"Update Step",8,Le),t.fieldsCount==0?(n(),u("button",{key:0,onClick:N=>z(t),type:"button",class:"relative inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"Add Field",8,Ve)):E("",!0)])]))),128))])])):(n(),u("dd",Oe,"Nil"))]),e("div",Pe,[Ge,e("dd",Re,a(s(i).createdAt||"N/A"),1)])])])):s(r)&&!Object.keys(s(i)).length?(n(),u("div",ze,Je)):(n(),D(_,{key:2,title:"No Data available",desc:"Please add steps to preview"})),s(A)?(n(),u("div",Ke,[Qe,e("div",Xe,[e("div",Ye,[e("div",Ze,[e("div",et,[e("section",tt,[e("div",st,[e("div",ot,[e("div",lt,[e("h2",it,"Add New Field To Step "+a(s(f).title||"N/A"),1),e("div",nt,[e("button",{onClick:o[2]||(o[2]=t=>A.value=!1),type:"button",class:"relative rounded-md bg-indigo-700 text-indigo-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white"},ct)])]),e("div",ut,[e("p",pt,"Get started by selecting the fields you would want to add to "+a(s(f).title||"N/A")+" step.",1)])]),s(h).length&&!s(w)?(n(),u("div",ft,[e("fieldset",null,[gt,e("div",mt,[(n(!0),u(U,null,T(s(h),(t,F)=>(n(),u("div",{class:"relative flex items-start",key:F},[e("div",yt,[e("input",{onChange:N=>q(t.id,N.target.checked),id:t.name,value:t.id,"aria-describedby":"comments-description",name:t.name,type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"},null,40,_t)]),e("div",ht,[e("label",{for:t.name,class:"font-medium text-gray-900"},a(t.name||"N/A"),9,vt),e("p",xt,a(t.description||"N/A"),1),e("p",bt,a(t.type||"N/A"),1)])]))),128))])])])):s(w)&&!s(h).length?(n(),u("div",wt,St)):(n(),D(_,{key:2,title:"No Fields available",desc:"Please create Fields"}))]),e("div",Ct,[At,e("button",{disabled:s(j),type:"button",onClick:J,class:"ml-4 inline-flex justify-center disabled:cursor-not-allowed disabled:opacity-25 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},a(s(j)?"processing...":"Submit"),9,Ft)])])])])])])])):E("",!0),H(B,{show:s(k),"onUpdate:show":o[4]||(o[4]=t=>k.value=t)},{default:I(()=>[e("section",Nt,[Ut,e("div",null,[Tt,W(e("select",{"onUpdate:modelValue":o[3]||(o[3]=t=>s(S).status=t),id:"location",name:"location",class:"mt-2 block w-full outline-none rounded-md border-0 py-3 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(n(!0),u(U,null,T(s(Q),t=>(n(),u("option",{key:t.value,value:t.value},a(t.text),9,Wt))),128))],512),[[ae,s(S).status]])]),e("div",{class:"w-full pb-3",onClick:Y},[e("button",{disabled:s(M)||!s(X),class:"w-full disabled:cursor-not-allowed disabled:opacity-25 bg-green-500 text-white py-2.5 rounded-md"},a(s(M)?"processing..":"Submit"),9,jt)])])]),_:1},8,["show"]),H(B,{show:s(v),"onUpdate:show":o[8]||(o[8]=t=>v.value=t)},{default:I(()=>[e("section",Mt,[e("div",$t,[Bt,e("div",Dt,[e("div",Et,[e("div",Ht,[e("div",null,[It,e("div",Lt,[W(e("input",{placeholder:"Enter field name","onUpdate:modelValue":o[5]||(o[5]=t=>s(f).title=t),type:"text",name:"project-name",id:"project-name",class:"block w-full text-sm rounded-md border-0 py-3 px-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[L,s(f).title]])])]),e("div",null,[Vt,e("div",Ot,[W(e("textarea",{placeholder:"Describe field description","onUpdate:modelValue":o[6]||(o[6]=t=>s(f).description=t),id:"description",name:"description",rows:"4",class:"block w-full text-sm rounded-md border-0 py-3 px-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[L,s(f).description]])])])])])])]),e("div",Pt,[e("button",{type:"button",onClick:o[7]||(o[7]=t=>v.value=!1),class:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},"Cancel"),e("button",{disabled:s($),onClick:ee,type:"button",class:"ml-4 inline-flex justify-center disabled:cursor-not-allowed disabled:opacity-25 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},a(s($)?"processing...":"Submit"),9,Gt)])])]),_:1},8,["show"])])}}});export{Qt as default};
