import{_ as D}from"./EmptyState.vue.2686ac38.js";import{r as c,G as I,n as x,u as y,q as S,o as a,c as r,a as e,x as i,F as w,z as M,A as B,s as k,C as $,B as F,t as d,D as O,E as T,d as j}from"./entry.0551859d.js";import{u as z,a as U,S as C}from"./login.9c5c027d.js";import{o as _}from"./organization.74194ff8.js";import"./auth.f70e99d1.js";import"./axios.config.3b7d29d9.js";const{id:V}=z(),H=()=>{const n=c(!1),o=c({userId:V,role:""}),u=async()=>{const m={userId:o.value.userId,role:o.value.role};n.value=!0,_.createOrganizationMember(x().params.id,m).then(p=>{typeof p>"u"||y().$toast.success("Organization Member was successfully deleted",{autoClose:5e3,dangerouslyHTMLString:!0})}).catch(p=>{y().$toast.error(p.message,{autoClose:5e3,dangerouslyHTMLString:!0})}).finally(()=>{n.value=!1})},l=I(()=>!!(o.value.role&&o.value.userId));return{handleAddMember:u,memberPayload:o,loading:n,isFormEmpty:l}},W=()=>{const n=c(!1);x();const o=c([]);return U("members",{organizationMembersList:o}),{fetchOrganizationMembers:async()=>{n.value=!0;try{const l=await _.getOrganizationMembers(x().params.id);o.value=l.data.users}catch(l){return l}finally{n.value=!1}},organizationMembersList:o,loading:n}},G=()=>{const n=c(!1),o=x();return{handleDeleteMember:async l=>{n.value=!0,_.deleteOrganizationMember(o.params.id,l).then(m=>{typeof m>"u"||y().$toast.success("Organization Member was successfully deleted",{autoClose:5e3,dangerouslyHTMLString:!0})}).catch(m=>{y().$toast.error(m.message,{autoClose:5e3,dangerouslyHTMLString:!0})}).finally(()=>{n.value=!1})},loading:n}},P={class:"px-4 sm:px-6 lg:px-8"},Y={class:"sm:flex sm:items-center border-[0.6px] rounded-tr-md rounded-tl-md p-3"},q=e("div",{class:"sm:flex-auto"},[e("h1",{class:"text-base font-semibold leading-6 text-gray-900"},"Organization Members"),e("p",{class:"mt-2 text-sm text-gray-700"},"A list of all organizations members")],-1),J={class:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},K={class:"flow-root"},Q={key:0,class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},X={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},Z={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},ee={class:"min-w-full divide-y divide-gray-300"},te=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," First Name "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Last Name "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Email"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Organization ID"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Role"),e("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Edit")])])],-1),se={class:"divide-y divide-gray-200 bg-white"},oe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},ie={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ne={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},le={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ae={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},re={key:0,class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},de=["onClick"],ce=e("span",{class:"sr-only"},null,-1),me={key:0,class:"relative z-50","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true"},ue=e("div",{class:"fixed inset-0"},null,-1),pe={class:"fixed inset-0 overflow-hidden"},ge={class:"absolute inset-0 overflow-hidden"},fe={class:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16"},xe={class:"pointer-events-auto w-screen max-w-md"},ye={class:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl"},be={class:"h-0 flex-1 overflow-y-auto"},he={class:"bg-indigo-700 px-4 py-6 sm:px-6"},_e={class:"flex items-center justify-between"},ve=e("h2",{class:"text-base font-semibold leading-6 text-white",id:"slide-over-title"},"Create New Organization Member ",-1),we={class:"ml-3 flex h-7 items-center"},Me=e("span",{class:"absolute -inset-2.5"},null,-1),ke=e("span",{class:"sr-only"},"Close panel",-1),Oe=e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Ce=[Me,ke,Oe],ze=e("div",{class:"mt-1"},[e("p",{class:"text-sm text-indigo-300"},"Get started by filling in the information below to create your new member.")],-1),Ae={class:"flex flex-1 flex-col justify-between"},Ne={class:"divide-y divide-gray-200 px-4 sm:px-6"},Re={class:"space-y-6 pb-5 pt-6"},Ee=e("label",{for:"project-name",class:"block text-sm font-medium leading-6 text-gray-900"},"User ID",-1),Le={class:"mt-2"},De=e("label",{for:"description",class:"block text-sm font-medium leading-6 text-gray-900"},"Field Type",-1),Ie={class:"mt-2"},Se=["value"],Be={class:"flex flex-shrink-0 justify-end px-4 py-4"},$e=["disabled"],Pe=S({__name:"members",setup(n){const{userRole:o}=z(),{fetchOrganizationMembers:u,organizationMembersList:l,loading:m}=W(),{handleDeleteMember:p,loading:Fe}=G(),{handleAddMember:v,memberPayload:g,loading:A,isFormEmpty:N}=H(),R=c([{text:"User",value:"ROLE_USER"},{text:"Administrator RO",value:"ROLE_ADMIN_RO"},{text:"Administrator RW",value:"ROLE_ADMIN_RW"},{text:"Owner",value:"ROLE_OWNER"}]);u();const E=b=>{C.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async s=>{s.isConfirmed?await p(b):C.fire("Cancelled","Action was cancelled","info")})},f=c(!1);return(b,s)=>{const L=D;return a(),r("main",null,[e("div",P,[e("button",{onClick:s[0]||(s[0]=t=>b.$router.back()),class:"text-white bg-black rounded-full text-sm mb-4 px-4 py-2"},"Go Back"),e("div",Y,[q,e("div",J,[e("button",{type:"button",onClick:s[1]||(s[1]=t=>f.value=!0),class:"block rounded-md bg-green-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"Add Member")])]),e("div",K,[i(l).length?(a(),r("div",Q,[e("div",X,[e("div",Z,[e("table",ee,[te,e("tbody",se,[(a(!0),r(w,null,M(i(l),(t,h)=>(a(),r("tr",{key:h},[e("td",oe,d(t.firstName),1),e("td",ie,d(t.lastName||"N/A"),1),e("td",ne,d(t.email||"N/A"),1),e("td",le,d(t.orgId||"N/A"),1),e("td",ae,d(t.role||"N/A"),1),i(o)==="ROLE_ADMIN_RO"||i(o)==="ROLE_ADMIN_RW"?(a(),r("td",re,[e("a",{href:"",onClick:T(Te=>E(t.id),["prevent"]),class:"bg-red-500 text-white px-3 py-1.5 rounded-md"},[j("Delete"),ce],8,de)])):O("",!0)]))),128))])])])])])):(a(),B(L,{key:1,title:"No Organization Member available",desc:"Please add an organization"}))])]),i(f)?(a(),r("div",me,[ue,e("div",pe,[e("div",ge,[e("div",fe,[e("div",xe,[e("section",ye,[e("div",be,[e("div",he,[e("div",_e,[ve,e("div",we,[e("button",{onClick:s[2]||(s[2]=t=>f.value=!1),type:"button",class:"relative rounded-md bg-indigo-700 text-indigo-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white"},Ce)])]),ze]),e("div",Ae,[e("div",Ne,[e("div",Re,[e("div",null,[Ee,e("div",Le,[k(e("input",{placeholder:"Enter field name","onUpdate:modelValue":s[3]||(s[3]=t=>i(g).userId=t),type:"text",readonly:"",disabled:"",name:"project-name",id:"project-name",class:"block w-full text-sm rounded-md border-0 py-3 font-semibold text-gray-950 cursor-not-allowed opacity-25 px-3 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[$,i(g).userId]])])]),e("div",null,[De,e("div",Ie,[k(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>i(g).role=t),class:"block w-full text-sm rounded-md border-0 py-3 px-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(a(!0),r(w,null,M(i(R),(t,h)=>(a(),r("option",{key:h,value:t.value},d(t.text),9,Se))),128))],512),[[F,i(g).role]])])])])])])]),e("div",Be,[e("button",{type:"button",onClick:s[5]||(s[5]=t=>f.value=!1),class:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},"Cancel"),e("button",{disabled:!i(N),onClick:s[6]||(s[6]=(...t)=>i(v)&&i(v)(...t)),type:"button",class:"ml-4 inline-flex justify-center disabled:cursor-not-allowed disabled:opacity-25 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},d(i(A)?"processing...":"Submit"),9,$e)])])])])])])])):O("",!0)])}}});export{Pe as default};
