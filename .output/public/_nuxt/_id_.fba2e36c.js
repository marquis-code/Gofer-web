import{_ as $}from"./EmptyState.vue.2686ac38.js";import{_ as F}from"./BaseModal.c2106c97.js";import{r as i,u as w,n as T,q as L,h as q,o,c as a,a as e,s as N,v as H,x as t,y as U,F as f,z as v,A as E,t as l,b as Y,w as z,d as b,B as G,C as W,D as J,E as K}from"./entry.0551859d.js";import{d as C}from"./documents.5a94c6c6.js";import"./axios.config.3b7d29d9.js";const Q=()=>{const m=i(!1),c=i({actor:"ACTOR_ADMIN",type:"",message:"",createdAt:new Date});return{handleAddEventToStep:async(d,A)=>{m.value=!0;try{if(typeof await C.updateDocumentStep(d,A,{event:c.value})>"u")return;w().$toast.success("New event was successfully added",{autoClose:5e3,dangerouslyHTMLString:!0})}catch(_){w().$toast.success(_.message,{autoClose:5e3,dangerouslyHTMLString:!0})}finally{m.value=!1}},populateRequestPayload:d=>{c.value.actor=d.actor,c.value.type=d.type,c.value.message=d.message,c.value.createdAt=d.createdAt},loading:m}},X=()=>{const m=T().params.id,c=i([]),n=i(!1);return{getStepsByDocumentId:async()=>{n.value=!0;try{const d=await C.getDocumentBasedOnStep(m);c.value=d.data.steps}catch(d){w().$toast.success(d.message,{autoClose:5e3,dangerouslyHTMLString:!0})}finally{n.value=!1}},documentSteps:c,loading:n}},Z=()=>{const m=T().params.id,c=i({}),n=i(!1);return{getDocumentById:async()=>{n.value=!0;try{const d=await C.getDocumentsById(m);typeof d<"u"&&(c.value=d.data.document)}catch(d){w().$toast.success(d.message,{autoClose:5e3,dangerouslyHTMLString:!0})}finally{n.value=!1}},documentObject:c,loading:n}},ee={class:"sm:flex sm:items-center border-[0.6px] rounded-tr-md rounded-tl-md p-3"},te=e("div",{class:"sm:flex-auto"},[e("h1",{class:"text-base font-semibold leading-6 text-gray-900"},"Document Details"),e("p",{class:"mt-2 text-sm text-gray-700"},"A brief information lto show document details")],-1),se=e("legend",{class:"sr-only"},"Notifications",-1),oe={class:"space-y-5"},ae={class:"relative flex items-start"},ne={class:"flex h-6 items-center"},de=e("div",{class:"ml-3 text-sm leading-6"},[e("label",{for:"comments",class:"font-medium text-gray-900"},"Filter by:"),e("p",{id:"comments-description",class:"text-gray-500"},"Filter by steps")],-1),le={key:0},ce={key:0,class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},ie={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},re={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},pe={class:"min-w-full divide-y divide-gray-300"},me=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Step Title"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Step Description"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Events"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Completed At"),e("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},[e("span",{class:"sr-only"},"add event")])])],-1),ue={class:"divide-y divide-gray-200"},ge={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},_e={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ye={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},xe={key:0,class:"space-y-3 overflow-y-auto h-32"},he={class:"flex justify-between items-center text-sm"},fe=e("p",{class:"font-semibold text-gray-900 text-xs"},"Actor",-1),ve={class:"text-xs font-light"},be={class:"flex justify-between items-center text-sm"},we=e("p",{class:"font-semibold text-gray-900 text-xs"},"Type",-1),Ae={class:"text-xs font-light"},ke={class:"flex justify-between items-center text-sm"},Se=e("p",{class:"font-semibold text-gray-900 text-xs"},"Message",-1),Ne={class:"text-xs font-light"},Te={class:"flex justify-between items-center text-sm"},Ce=e("p",{class:"font-semibold text-gray-900 text-xs"},"Created At",-1),De={class:"text-xs font-light"},Me={key:1,class:"text-sm font-medium"},Be={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Ee={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0"},Ie=["onClick"],Oe=e("span",{class:"sr-only"},", Lindsay Walton",-1),Pe={key:1,class:"bg-white rounded-lg shadow-md p-4 animate-pulse"},je=e("div",{class:"w-full h-32 bg-gray-300 rounded mb-2"},null,-1),Re=[je],Ve={key:1},$e={key:0,class:"flow-root rounded-lg border border-gray-100 py-3 shadow-sm"},Fe={class:"-my-3 divide-y divide-gray-100 text-sm"},Le={class:"grid grid-cols-1 gap-1 p-3 even:bg-gray-50 sm:grid-cols-3 sm:gap-4"},qe=e("dt",{class:"font-medium text-gray-900"},"Name",-1),He={class:"text-gray-700 sm:col-span-2"},Ue={class:"grid grid-cols-1 gap-1 p-3 even:bg-gray-50 sm:grid-cols-3 sm:gap-4"},Ye=e("dt",{class:"font-medium text-gray-900"},"Steps Completed",-1),ze={class:"text-gray-700 sm:col-span-2"},Ge={class:"grid grid-cols-1 gap-1 p-3 even:bg-gray-50 sm:grid-cols-3 sm:gap-4"},We=e("dt",{class:"font-medium text-gray-900"},"Description",-1),Je={class:"text-gray-700 sm:col-span-2"},Ke={class:"grid grid-cols-1 gap-1 p-3 even:bg-gray-50 sm:grid-cols-3 sm:gap-4"},Qe=e("dt",{class:"font-medium text-gray-900"},"Status",-1),Xe={class:"text-gray-700 sm:col-span-2"},Ze={class:"flex justify-between items-center"},et={class:"grid grid-cols-1 gap-1 p-3 even:bg-gray-50 sm:grid-cols-3 sm:gap-4"},tt=e("dt",{class:"font-medium text-gray-900"},"Steps",-1),st={key:0,class:"text-gray-700 sm:col-span-2"},ot={class:"border-b border-gray-200 bg-white px-4 py-5 sm:px-6"},at={class:"ml-4 mt-4"},nt={class:"text-base font-semibold leading-6 text-gray-900"},dt=e("span",{class:"text-sm font-medium text-gray-500"},"Title:",-1),lt={class:"mt-1 text-sm text-gray-900"},ct=e("span",{class:"text-sm font-medium text-gray-500"},"Description:",-1),it={class:"mt-1 text-sm text-gray-900"},rt=e("span",{class:"text-sm font-medium text-gray-500"},"Created At:",-1),pt={key:1,class:"text-gray-700 sm:col-span-2"},mt={class:"grid grid-cols-1 gap-1 p-3 even:bg-gray-50 sm:grid-cols-3 sm:gap-4"},ut=e("dt",{class:"font-medium text-gray-900"},"Created At",-1),gt={class:"text-gray-700 sm:col-span-2"},_t={key:1,class:"bg-white rounded-lg shadow-md p-4 animate-pulse"},yt=e("div",{class:"w-full h-32 bg-gray-300 rounded mb-2"},null,-1),xt=[yt],ht=["onSubmit"],ft=e("h1",{class:"font-semibold text-gray-800 text-center text-lg"},"Add Event To Step",-1),vt=e("label",{for:"location",class:"block text-sm font-medium leading-6 text-gray-900"},"Type",-1),bt=["value"],wt={key:0},At=e("label",{for:"location",class:"block text-sm font-medium leading-6 text-gray-900"},"Message",-1),kt={class:"w-full pb-3"},St=["disabled"],Bt=L({__name:"[id]",setup(m){const{getDocumentById:c,documentObject:n,loading:g}=Z(),{handleAddEventToStep:d,populateRequestPayload:A,loading:_}=Q(),{getStepsByDocumentId:I,documentSteps:k,loading:D}=X(),O=i([{text:"Type Comment",value:"TYPE_COMMENT"},{text:"Type Approval",value:"TYPE_APPROVAL"}]),p=i({actor:"ACTOR_ADMIN",type:"",message:"",createdAt:new Date}),y=i(!1);q(y,u=>{u&&I()});const h=i(!1),M=i({}),P=u=>{M.value=u,h.value=!0},j=async()=>{const u={actor:"ACTOR_ADMIN",type:p.value.type,createdAt:p.value.createdAt,...p.value.type==="TYPE_COMMENT"&&{message:p.value.message}};A(u),await d(T().params.id,M.value.id),h.value=!1};return c(),(u,r)=>{const B=$,R=F;return o(),a("main",null,[e("button",{onClick:r[0]||(r[0]=s=>u.$router.back()),class:"text-white bg-black rounded-full text-sm mb-4 px-4 py-2"},"Go Back"),e("div",ee,[te,e("fieldset",null,[se,e("div",oe,[e("div",ae,[e("div",ne,[N(e("input",{"onUpdate:modelValue":r[1]||(r[1]=s=>U(y)?y.value=s:null),id:"comments","aria-describedby":"comments-description",name:"comments",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"},null,512),[[H,t(y)]])]),de])])])]),t(y)===!0?(o(),a("section",le,[t(k).length&&!t(D)?(o(),a("div",ce,[e("div",ie,[e("div",re,[e("table",pe,[me,e("tbody",ue,[(o(!0),a(f,null,v(t(k),(s,S)=>(o(),a("tr",{key:S},[e("td",ge,l(s.step.title||"N/A"),1),e("td",_e,l(s.step.description||"N/A"),1),e("td",ye,[s.events.length?(o(),a("div",xe,[(o(!0),a(f,null,v(s.events,(x,V)=>(o(),a("div",{key:V,class:"border bg-white shadow p-3 rounded-md space-y-2.5"},[e("div",he,[fe,e("p",ve,l(x.actor||"N/A"),1)]),e("div",be,[we,e("p",Ae,l(x.type||"N/A"),1)]),e("div",ke,[Se,e("p",Ne,l(x.message||"N/A"),1)]),e("div",Te,[Ce,e("p",De,l(x.createdAt||"N/A"),1)])]))),128))])):(o(),a("p",Me,"No Event has been added"))]),e("td",Be,l(s.completedAt||"N/A"),1),e("td",Ee,[e("button",{onClick:x=>P(s),class:"text-indigo-600 hover:text-indigo-900"},[b("add event"),Oe],8,Ie)])]))),128))])])])])])):t(D)&&!t(k).length?(o(),a("div",Pe,Re)):(o(),E(B,{key:2,title:"No Organization available",desc:"Please add an organization"}))])):(o(),a("section",Ve,[!t(g)&&Object.keys(t(n)).length?(o(),a("div",$e,[e("dl",Fe,[e("div",Le,[qe,e("dd",He,l(t(n).workflow.name||"N/A"),1)]),e("div",Ue,[Ye,e("dd",ze,l(t(n).stepsCompleted||"N/A"),1)]),e("div",Ge,[We,e("dd",Je,l(t(n).workflow.description||"N/A"),1)]),e("div",Ke,[Qe,e("dd",Xe,[e("div",Ze,[e("p",null,l(t(n).workflow.status||"N/A"),1)])])]),e("div",et,[tt,t(n).workflow.length?(o(),a("dd",st,[e("div",ot,[(o(!0),a(f,null,v(t(n).workflow.steps,(s,S)=>(o(),a("div",{key:S,class:"-ml-4 -mt-4 flex flex-wrap border-gray-400 border-b-[0.6px] last:border-b-0 py-2 items-center justify-between sm:flex-nowrap"},[e("div",at,[e("h3",nt,[dt,b(" "+l(s.title),1)]),e("p",lt,[ct,b(" "+l(s.description),1)]),e("p",it,[rt,b(" "+l(s.createdAt),1)])])]))),128))])])):(o(),a("dd",pt,"Nil"))]),e("div",mt,[ut,e("dd",gt,l(t(n).workflow.createdAt||"N/A"),1)])])])):t(g)&&!Object.keys(t(n)).length?(o(),a("div",_t,xt)):(o(),E(B,{key:2,title:"No Data available",desc:"Please add steps to preview"}))])),Y(R,{show:t(h),"onUpdate:show":r[4]||(r[4]=s=>h.value=s)},{default:z(()=>[e("form",{class:"space-y-8",onSubmit:K(j,["prevent"])},[ft,e("div",null,[vt,N(e("select",{"onUpdate:modelValue":r[2]||(r[2]=s=>t(p).type=s),id:"location",name:"location",class:"mt-2 block w-full outline-none rounded-md border-0 py-3 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"},[(o(!0),a(f,null,v(t(O),s=>(o(),a("option",{key:s.value,value:s.value},l(s.text),9,bt))),128))],512),[[G,t(p).type]])]),t(p).type==="TYPE_COMMENT"?(o(),a("div",wt,[At,N(e("textarea",{cols:"4",rows:"4","onUpdate:modelValue":r[3]||(r[3]=s=>t(p).message=s),class:"mt-2 block w-full outline-none rounded-md border-0 py-3 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[W,t(p).message]])])):J("",!0),e("div",kt,[e("button",{disabled:t(_),class:"w-full disabled:cursor-not-allowed disabled:opacity-25 bg-green-500 text-white py-2.5 rounded-md"},l(t(_)?"processing..":"Submit"),9,St)])],40,ht)]),_:1},8,["show"])])}}});export{Bt as default};
