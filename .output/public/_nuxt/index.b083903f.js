import{_ as W}from"./EmptyState.vue.2686ac38.js";import{_ as $}from"./BaseModal.c2106c97.js";import{r as i,G as C,u as y,q as E,h as V,o as l,c as n,a as t,s as v,B as H,x as s,y as T,F as k,z as D,A as G,b as P,w as U,t as d,E as R,C as j,H as q}from"./entry.0551859d.js";import{u as z}from"./getDocumentByWorkflow.cb14a6cb.js";import{d as A}from"./documents.5a94c6c6.js";import{u as J}from"./fetchWorkflows.bd81fc81.js";import"./axios.config.3b7d29d9.js";import"./workflow.8067b181.js";import"./login.9c5c027d.js";import"./auth.f70e99d1.js";const K=()=>{const a=i(!1),r=i({workflowId:""}),p=async()=>{a.value=!0;try{if(typeof await A.createDocument(r.value)>"u")return;y().$toast.success("New document was successfully created",{autoClose:5e3,dangerouslyHTMLString:!0})}catch(u){y().$toast.success(u.message,{autoClose:5e3,dangerouslyHTMLString:!0})}finally{a.value=!1}},c=C(()=>r.value.workflowId);return{createDocument:p,documentPayload:r,loading:a,isCreateFormEmpty:c}},O=()=>{const a=i(!1),r=i([]);return{getDocuments:async()=>{a.value=!0;try{const c=await A.getDocumentsList();r.value=c.data.documents}catch(c){return y().$toast.error(c.message,{autoClose:5e3,dangerouslyHTMLString:!0}),c}finally{a.value=!1}},documentsList:r,loading:a}},Q={class:"px-4 sm:px-6 lg:px-8"},X={class:"sm:flex sm:items-center border-[0.6px] rounded-tr-md rounded-tl-md p-3"},Y=t("div",{class:"sm:flex-auto"},[t("h1",{class:"text-base font-semibold leading-6 text-gray-900"},"Documents"),t("p",{class:"mt-2 text-sm text-gray-700"},"A list of all documents")],-1),Z={class:"mt-4 sm:ml-16 sm:mt-0 flex items-center gap-x-6 sm:flex-none"},tt=t("p",{class:"text-sm text-gray-700"},"Filter by workflow:",-1),et=["value"],st={class:"flow-root"},ot={key:0,class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},lt={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},nt={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},at={class:"min-w-full divide-y divide-gray-300"},rt=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," No "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Description"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Steps"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Steps Completed "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Status"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"CreatedAt"),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Actions")])],-1),dt={class:"divide-y divide-gray-200 bg-white"},ct={class:"whitespace-nowrap cursor-pointer py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},it={class:"whitespace-nowrap cursor-pointer px-3 py-4 text-sm text-gray-500"},ut={class:"whitespace-nowrap cursor-pointer px-3 py-4 text-sm text-gray-500"},mt={key:0},pt={key:1,class:"text-sm text-gray-500 font-semibold"},ft={class:"whitespace-nowrap cursor-pointer px-3 py-4 text-sm text-gray-500"},xt={class:"whitespace-nowrap cursor-pointer px-3 py-4 text-sm text-gray-500"},gt={class:"whitespace-nowrap cursor-pointer px-3 py-4 text-sm text-gray-500"},wt={class:"whitespace-nowrap cursor-pointer px-3 py-4 text-sm text-gray-500"},yt={class:"flex justify-between items-center"},ht=["onClick"],_t={key:1,class:"bg-white rounded-lg shadow-md p-4 animate-pulse"},bt=t("div",{class:"w-full h-32 bg-gray-300 rounded mb-2"},null,-1),vt=[bt],kt=t("h1",{class:"font-semibold text-gray-800 text-center text-lg"},"Create new document",-1),Dt=t("label",{for:"workflowId",class:"block text-sm font-medium leading-6 text-gray-900"},"Workflow Id:",-1),Ct={class:"w-full pb-3"},At=["disabled"],Tt=E({__name:"index",setup(a){const{getDocuments:r,documentsList:p,loading:c}=O(),{createDocument:u,documentPayload:h,loading:_,isCreateFormEmpty:N}=K(),{fetchWorkflows:I,workflowList:S,loading:Nt}=J(),{getDocumentByWWorkflowId:L,documentList:f,loading:b}=z();I();const w=i(!1);i({workflowId:""});const B=x=>{q().push(`/dashboard/document/${x.id}`)},m=i("");return V(m,x=>{L(x)}),r(),C(()=>m.value?f.vale:p.value),(x,o)=>{const M=W,F=$;return l(),n("main",null,[t("div",Q,[t("div",X,[Y,t("div",Z,[t("div",null,[tt,v(t("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>T(m)?m.value=e:null),class:"border border-gray-500 py-1.5 rounded-md"},[(l(!0),n(k,null,D(s(S),(e,g)=>(l(),n("option",{value:e.id,key:g},d(e.name||"N/A"),9,et))),128))],512),[[H,s(m)]])]),t("button",{onClick:o[1]||(o[1]=e=>w.value=!0),class:"block rounded-md bg-green-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"}," Add Document")])]),t("div",st,[s(f).length&&!s(b)?(l(),n("div",ot,[t("div",lt,[t("div",nt,[t("table",at,[rt,t("tbody",dt,[(l(!0),n(k,null,D(s(f),(e,g)=>(l(),n("tr",{key:g},[t("td",ct,d(g+1||"N/A"),1),t("td",it,d(e.workflow.description||"N/A"),1),t("td",ut,[e.workflow.steps.length?(l(),n("span",mt,d(e.workflow.steps.length||"N/A"),1)):(l(),n("span",pt,"No step has been added to this workflow "))]),t("td",ft,d(e.stepsCompleted||"Nil"),1),t("td",xt,d(e.workflow.status||"N/A"),1),t("td",gt,d(e.workflow.createdAt||"N/A"),1),t("td",wt,[t("div",yt,[t("button",{onClick:It=>B(e),class:"bg-black text-white px-3 py-2 rounded-md text-sm"},"View details",8,ht)])])]))),128))])])])])])):s(b)&&!s(f).length?(l(),n("div",_t,vt)):(l(),G(M,{key:2,title:"No Documents available",desc:"Please add a document"}))])]),P(F,{show:s(w),"onUpdate:show":o[4]||(o[4]=e=>w.value=e)},{default:U(()=>[t("section",null,[t("form",{class:"space-y-8",onSubmit:o[3]||(o[3]=R((...e)=>s(u)&&s(u)(...e),["prevent"]))},[kt,t("div",null,[Dt,v(t("input",{placeholder:"Enter workflow id","onUpdate:modelValue":o[2]||(o[2]=e=>s(h).workflowId=e),type:"tel",name:"workflowId",id:"workflowId",class:"block w-full text-sm rounded-md border-0 py-3 px-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[j,s(h).workflowId]])]),t("div",Ct,[t("button",{disabled:s(_)||!s(N),class:"w-full disabled:cursor-not-allowed disabled:opacity-25 bg-green-500 text-white py-2.5 rounded-md"},d(s(_)?"processing..":"Submit"),9,At)])],32)])]),_:1},8,["show"])])}}});export{Tt as default};
